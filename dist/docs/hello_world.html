<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Hello World - The Azle Book</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Azle Book</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="hello-world"><a class="header" href="#hello-world">Hello World</a></h1>
<ul>
<li><a href="#quick-start">Quick start</a></li>
<li><a href="#slow-start">Methodical start</a>
<ul>
<li><a href="#the-project-directory-and-file-structure">The project directory and file structure</a></li>
<li><a href="#indexts">index.ts</a></li>
<li><a href="#tsconfigjson">tsconfig.json</a></li>
<li><a href="#dfxjson">dfx.json</a></li>
<li><a href="#local-deployment">Local deployment</a></li>
<li><a href="#common-deployment-issues">Common deployment issues</a></li>
<li><a href="#interacting-with-your-canister-from-the-command-line">Interacting with your canister from the command line</a></li>
<li><a href="#interacting-with-your-canister-from-the-web-ui">Interacting with your canister from the web UI</a></li>
</ul>
</li>
</ul>
<p>Let's build your first application (canister) with Azle!</p>
<p>Before embarking please ensure you've followed all of <a href="./installation.html">the installation instructions</a>, especially noting <a href="./installation.html#build-dependencies">the build dependencies</a>.</p>
<p>We'll build a simple <code>Hello World</code> canister that shows the basics of importing Azle, exposing a query method, exposing an update method, and storing some state in a global variable. We'll then interact with it from the command line and from our web browser.</p>
<h2 id="quick-start"><a class="header" href="#quick-start">Quick Start</a></h2>
<p>We are going to use the Azle <code>new</code> command which creates a simple example project.</p>
<p>First use the <code>new</code> command to create a new project called <code>azle_hello_world</code>:</p>
<pre><code class="language-bash">npx azle new azle_hello_world
</code></pre>
<p>Now let's go inside of our project:</p>
<pre><code class="language-bash">cd azle_hello_world
</code></pre>
<p>We should install Azle and all of its dependencies:</p>
<pre><code class="language-bash">npm install
</code></pre>
<p>Start up your local replica:</p>
<pre><code class="language-bash">dfx start
</code></pre>
<p>In another terminal, deploy your canister:</p>
<pre><code class="language-bash">dfx deploy azle_hello_world
</code></pre>
<p>Call the <code>setMessage</code> method:</p>
<pre><code class="language-bash">dfx canister call azle_hello_world setMessage '("Hello world!")'
</code></pre>
<p>Call the <code>getMessage</code> method:</p>
<pre><code class="language-bash">dfx canister call azle_hello_world getMessage
</code></pre>
<p>If you run into an error during deployment, see <a href="./deployment.html#common-deployment-issues">the common deployment issues section</a>.</p>
<p>See the official <a href="https://github.com/demergent-labs/azle_hello_world">azle_hello_world</a> example for more information.</p>
<h2 id="methodical-start"><a class="header" href="#methodical-start">Methodical start</a></h2>
<h3 id="the-project-directory-and-file-structure"><a class="header" href="#the-project-directory-and-file-structure">The project directory and file structure</a></h3>
<p>Assuming you're starting completely from scratch, run these commands to setup your project's directory and file structure:</p>
<pre><code class="language-bash">mkdir azle_hello_world
cd azle_hello_world

mkdir src

touch src/index.ts
touch tsconfig.json
touch dfx.json
</code></pre>
<p>Now install Azle, which will create your <code>package.json</code> and <code>package-lock.json</code> files:</p>
<pre><code class="language-bash">npm install azle
</code></pre>
<p>Open up <code>azle_hello_world</code> in your text editor (we recommend <a href="https://code.visualstudio.com/">VS Code</a>).</p>
<h3 id="indexts"><a class="header" href="#indexts">index.ts</a></h3>
<p>Here's the main code of the project, which you should put in the <code>azle_hello_world/src/index.ts</code> file of your canister:</p>
<pre><code class="language-typescript">import { Canister, query, text, update, Void } from 'azle/experimental';

// This is a global variable that is stored on the heap
let message = '';

export default Canister({
    // Query calls complete quickly because they do not go through consensus
    getMessage: query([], text, () =&gt; {
        return message;
    }),
    // Update calls take a few seconds to complete
    // This is because they persist state changes and go through consensus
    setMessage: update([text], Void, (newMessage) =&gt; {
        message = newMessage; // This change will be persisted
    })
});
</code></pre>
<p>Let's discuss each section of the code.</p>
<pre><code class="language-typescript">import { Canister, query, text, update, Void } from 'azle/experimental';
</code></pre>
<p>The code starts off by importing <code>Canister</code>, <code>query</code>, <code>text</code>, <code>update</code> and <code>Void</code> from <code>azle</code>. The <code>azle</code> module provides most of the Internet Computer (IC) APIs for your canister.</p>
<pre><code class="language-typescript">// This is a global variable that is stored on the heap
let message = '';
</code></pre>
<p>We have created a global variable to store the state of our application. This variable is in scope to all of the functions defined in this module. We have set it equal to an empty string.</p>
<pre><code class="language-typescript">export default Canister({
    ...
});
</code></pre>
<p>The <code>Canister</code> function allows us to export our canister's definition to the Azle IC environment.</p>
<pre><code class="language-typescript">// Query calls complete quickly because they do not go through consensus
getMessage: query([], text, () =&gt; {
    return message;
}),
</code></pre>
<p>We are exposing a canister query method here. This method simply returns our global <code>message</code> variable. We use a <code>CandidType</code> object called <code>text</code> to instruct Azle to encode the return value as a Candid <code>text</code> value. When query methods are called they execute quickly because they do not have to go through consensus.</p>
<pre><code class="language-typescript">// Update calls take a few seconds to complete
// This is because they persist state changes and go through consensus
setMessage: update([text], Void, (newMessage) =&gt; {
    message = newMessage; // This change will be persisted
});
</code></pre>
<p>We are exposing an update method here. This method accepts a <code>string</code> from the caller and will store it in our global <code>message</code> variable. We use a <code>CandidType</code> object called <code>text</code> to instruct Azle to decode the <code>newMessage</code> parameter from a Candid <code>text</code> value to a JavaScript string value. Azle will infer the TypeScript type for <code>newMessage</code>. We use a <code>CandidType</code> object called <code>Void</code> to instruct Azle to encode the return value as the absence of a Candid value.</p>
<p>When update methods are called they take a few seconds to complete. This is because they persist changes and go through consensus. A majority of nodes in a subnet must agree on all state changes introduced in calls to update methods.</p>
<p>That's it! We've created a very simple getter/setter <code>Hello World</code> application. But no <code>Hello World</code> project is complete without actually yelling <code>Hello world</code>!</p>
<p>To do that, we'll need to setup the rest of our project.</p>
<h3 id="tsconfigjson"><a class="header" href="#tsconfigjson">tsconfig.json</a></h3>
<p>Create the following in <code>azle_hello_world/tsconfig.json</code>:</p>
<pre><code class="language-json">{
    "compilerOptions": {
        "strict": true,
        "target": "ES2020",
        "moduleResolution": "node",
        "allowJs": true,
        "outDir": "HACK_BECAUSE_OF_ALLOW_JS"
    }
}
</code></pre>
<h3 id="dfxjson"><a class="header" href="#dfxjson">dfx.json</a></h3>
<p>Create the following in <code>azle_hello_world/dfx.json</code>:</p>
<pre><code class="language-json">{
    "canisters": {
        "azle_hello_world": {
            "type": "custom",
            "main": "src/index.ts",
            "candid": "src/index.did",
            "build": "node_modules/.bin/azle compile azle_hello_world",
            "wasm": ".azle/azle_hello_world/azle_hello_world.wasm",
            "gzip": true
        }
    }
}
</code></pre>
<h3 id="local-deployment"><a class="header" href="#local-deployment">Local deployment</a></h3>
<p>Let's deploy to our local replica.</p>
<p>First startup the replica:</p>
<pre><code class="language-bash">dfx start --background
</code></pre>
<p>Then deploy the canister:</p>
<pre><code class="language-bash">dfx deploy
</code></pre>
<h3 id="common-deployment-issues"><a class="header" href="#common-deployment-issues">Common deployment issues</a></h3>
<p>If you run into an error during deployment, see <a href="./deployment.html#common-deployment-issues">the common deployment issues section</a>.</p>
<h3 id="interacting-with-your-canister-from-the-command-line"><a class="header" href="#interacting-with-your-canister-from-the-command-line">Interacting with your canister from the command line</a></h3>
<p>Once we've deployed we can ask for our message:</p>
<pre><code class="language-bash">dfx canister call azle_hello_world getMessage
</code></pre>
<p>We should see <code>("")</code> representing an empty message.</p>
<p>Now let's yell <code>Hello World!</code>:</p>
<pre><code class="language-bash">dfx canister call azle_hello_world setMessage '("Hello World!")'
</code></pre>
<p>Retrieve the message:</p>
<pre><code class="language-bash">dfx canister call azle_hello_world getMessage
</code></pre>
<p>We should see <code>("Hello World!")</code>.</p>
<h3 id="interacting-with-your-canister-from-the-web-ui"><a class="header" href="#interacting-with-your-canister-from-the-web-ui">Interacting with your canister from the web UI</a></h3>
<p>After deploying your canister, you should see output similar to the following in your terminal:</p>
<pre><code class="language-bash">Deployed canisters.
URLs:
  Backend canister via Candid interface:
    azle_hello_world: http://127.0.0.1:8000/?canisterId=ryjl3-tyaaa-aaaaa-aaaba-cai&amp;id=rrkah-fqaaa-aaaaa-aaaaq-cai
</code></pre>
<p>Open up <a href="http://127.0.0.1:8000/?canisterId=ryjl3-tyaaa-aaaaa-aaaba-cai&amp;id=rrkah-fqaaa-aaaaa-aaaaq-cai">http://127.0.0.1:8000/?canisterId=ryjl3-tyaaa-aaaaa-aaaba-cai&amp;id=rrkah-fqaaa-aaaaa-aaaaq-cai</a> or the equivalent URL from your terminal to access the web UI and interact with your canister.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="installation.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="deployment_candid_based.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="installation.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="deployment_candid_based.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
